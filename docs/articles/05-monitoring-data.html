<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monitoring data drift • flyover</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Monitoring data drift">
<meta property="og:description" content="flyover">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flyover</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-preparing-data.html">Optional data preparation</a>
    </li>
    <li>
      <a href="../articles/02-building-plots.html">Creating plots</a>
    </li>
    <li>
      <a href="../articles/03-building-displays.html">Creating displays</a>
    </li>
    <li>
      <a href="../articles/04-custom-plots.html">Using custom plots</a>
    </li>
    <li>
      <a href="../articles/05-monitoring-data.html">Monitoring data drift</a>
    </li>
    <li>
      <a href="../articles/06-gallery.html">Gallery</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ataustin/flyover/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Monitoring data drift</h1>
            
            <h4 class="date">2020-12-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ataustin/flyover/blob/master/vignettes/05-monitoring-data.Rmd"><code>vignettes/05-monitoring-data.Rmd</code></a></small>
      <div class="hidden name"><code>05-monitoring-data.Rmd</code></div>

    </div>

    
    
<div id="what-this-article-covers" class="section level2">
<h2 class="hasAnchor">
<a href="#what-this-article-covers" class="anchor"></a>What this article covers</h2>
<p>This article illustrates how the <code>flyover</code> package can be useful to monitor data drift over time. In situations where you pull data on regular intervals, you may be interested in how that data is changing from one pull to another. A large enough shift in distributions may mean you need to retrain models or take other actions. Missing values may also wreak havoc if upstream data processes change without warning.</p>
</div>
<div id="data-for-this-example" class="section level2">
<h2 class="hasAnchor">
<a href="#data-for-this-example" class="anchor"></a>Data for this example</h2>
<p>We will examine a subset of major storm data that is available from the <code>dplyr</code> package. This will be illustrative only.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="va">my_data</span> <span class="op">&lt;-</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/storms.html">storms</a></span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">2006</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">ts_diameter</span>, <span class="va">hu_diameter</span>, <span class="va">lat</span>, <span class="va">long</span>, <span class="va">status</span>, <span class="va">category</span>, <span class="va">wind</span>, <span class="va">pressure</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></pre></div>
<pre><code>## tibble [2,441 × 9] (S3: tbl_df/tbl/data.frame)
##  $ year       : num [1:2441] 2007 2007 2007 2007 2007 ...
##  $ ts_diameter: num [1:2441] 0 127 127 138 138 ...
##  $ hu_diameter: num [1:2441] 0 0 0 0 0 0 0 0 0 0 ...
##  $ lat        : num [1:2441] 22.3 23.6 24.3 25.1 27 27.5 29.7 35.5 37.1 39.1 ...
##  $ long       : num [1:2441] -85.8 -85.7 -85.2 -84.6 -83.2 -82.7 -82.1 -66.5 -65.5 -64.2 ...
##  $ status     : chr [1:2441] "tropical depression" "tropical storm" "tropical storm" "tropical storm" ...
##  $ category   : Ord.factor w/ 7 levels "-1"&lt;"0"&lt;"1"&lt;"2"&lt;..: 1 2 2 2 2 1 1 1 2 2 ...
##  $ wind       : int [1:2441] 30 40 50 45 40 30 30 30 35 45 ...
##  $ pressure   : int [1:2441] 1004 1000 997 998 1000 1000 1001 1007 1004 999 ...</code></pre>
<p>When you create data to monitor drift, I recommend using a group column that is formatted akin to ISO-8601 standards, e.g. <code>YYYY-MM-DD</code>, and stacking the data sets in order of date. This will ensure your output is easy to read.</p>
</div>
<div id="distribution-drift" class="section level2">
<h2 class="hasAnchor">
<a href="#distribution-drift" class="anchor"></a>Distribution drift</h2>
<div id="numeric-distributions" class="section level3">
<h3 class="hasAnchor">
<a href="#numeric-distributions" class="anchor"></a>Numeric distributions</h3>
<p>I recommend using <code>flyover_binline_ridges</code> or <code>flyover_density_ridges</code> to monitor drift of numeric variables over time.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">ridges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_density_ridges</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>
<span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">ridges</span>,
              display_name <span class="op">=</span> <span class="st">"ridges"</span>,
              output_dir   <span class="op">=</span> <span class="st">"display-storm-ridges"</span><span class="op">)</span></pre></div>
<iframe src="display-storm-ridges/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
<div id="categorical-distributions" class="section level3">
<h3 class="hasAnchor">
<a href="#categorical-distributions" class="anchor"></a>Categorical distributions</h3>
<p>I recommend using <code>flyover_bar_fill</code> to monitor drift of categorical vairables over time. This will work best if the number of categories is small.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">bar_fill</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_bar_fill</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>
<span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">bar_fill</span>,
              display_name <span class="op">=</span> <span class="st">"bar fill"</span>,
              output_dir   <span class="op">=</span> <span class="st">"display-storm-bar-fill"</span><span class="op">)</span></pre></div>
<iframe src="display-storm-bar-fill/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
</div>
<div id="data-quality" class="section level2">
<h2 class="hasAnchor">
<a href="#data-quality" class="anchor"></a>Data quality</h2>
<p>You can also monitor missing values, either as raw counts or as a percent of total observations for the group.</p>
<div id="missing-value-counts" class="section level3">
<h3 class="hasAnchor">
<a href="#missing-value-counts" class="anchor"></a>Missing value counts</h3>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">na_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_na_count</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>
<span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">na_count</span>,
              display_name <span class="op">=</span> <span class="st">"NA count"</span>,
              output_dir   <span class="op">=</span> <span class="st">"display-storm-na-count"</span><span class="op">)</span></pre></div>
<iframe src="display-storm-na-count/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
<div id="missing-value-percentages" class="section level3">
<h3 class="hasAnchor">
<a href="#missing-value-percentages" class="anchor"></a>Missing value percentages</h3>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">na_percent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_na_percent</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>
<span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">na_percent</span>,
              display_name <span class="op">=</span> <span class="st">"NA percent"</span>,
              output_dir   <span class="op">=</span> <span class="st">"display-storm-na-percent"</span><span class="op">)</span></pre></div>
<iframe src="display-storm-na-percent/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam Austin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
