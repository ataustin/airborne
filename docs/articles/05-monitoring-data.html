<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monitoring data drift • flyover</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Monitoring data drift">
<meta property="og:description" content="flyover">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flyover</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-preparing-data.html">Optional data preparation</a>
    </li>
    <li>
      <a href="../articles/02-building-plots.html">Creating plots</a>
    </li>
    <li>
      <a href="../articles/03-building-displays.html">Creating displays</a>
    </li>
    <li>
      <a href="../articles/04-custom-plots.html">Using custom plots</a>
    </li>
    <li>
      <a href="../articles/05-monitoring-data.html">Monitoring data drift</a>
    </li>
    <li>
      <a href="../articles/06-gallery.html">Gallery</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ataustin/flyover/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Monitoring data drift</h1>
            
            <h4 data-toc-skip class="date">2024-01-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ataustin/flyover/blob/HEAD/vignettes/05-monitoring-data.Rmd" class="external-link"><code>vignettes/05-monitoring-data.Rmd</code></a></small>
      <div class="hidden name"><code>05-monitoring-data.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="what-this-article-covers">What this article covers<a class="anchor" aria-label="anchor" href="#what-this-article-covers"></a>
</h2>
<p>This article illustrates how the <code>flyover</code> package can be
useful to monitor data drift over time. In situations where you pull
data on regular intervals, you may be interested in how that data is
changing from one pull to another. A large enough shift in distributions
may mean you need to retrain models or take other actions. Missing
values may also wreak havoc if upstream data processes change without
warning.</p>
</div>
<div class="section level2">
<h2 id="data-for-this-example">Data for this example<a class="anchor" aria-label="anchor" href="#data-for-this-example"></a>
</h2>
<p>We will examine a subset of major storm data that is available from
the <code>dplyr</code> package. This will be illustrative only.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/storms.html" class="external-link">storms</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ts_diameter <span class="op">=</span> <span class="va">tropicalstorm_force_diameter</span>,</span>
<span>         hu_diameter <span class="op">=</span> <span class="va">hurricane_force_diameter</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">2006</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">ts_diameter</span>, <span class="va">hu_diameter</span>, <span class="va">lat</span>, <span class="va">long</span>, <span class="va">status</span>, <span class="va">category</span>, <span class="va">wind</span>, <span class="va">pressure</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## tibble [4,309 × 9] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ year       : num [1:4309] 2007 2007 2007 2007 2007 ...</span></span>
<span><span class="co">##  $ ts_diameter: int [1:4309] 0 110 110 120 120 0 0 0 60 240 ...</span></span>
<span><span class="co">##  $ hu_diameter: int [1:4309] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">##  $ lat        : num [1:4309] 22.3 23.6 24.3 25.1 27 27.5 29.7 35.5 37.1 39.1 ...</span></span>
<span><span class="co">##  $ long       : num [1:4309] -85.8 -85.7 -85.2 -84.6 -83.2 -82.7 -82.1 -66.5 -65.5 -64.2 ...</span></span>
<span><span class="co">##  $ status     : chr [1:4309] "tropical depression" "tropical storm" "tropical storm" "tropical storm" ...</span></span>
<span><span class="co">##  $ category   : Ord.factor w/ 7 levels "-1"&lt;"0"&lt;"1"&lt;"2"&lt;..: 1 2 2 2 2 1 1 1 2 2 ...</span></span>
<span><span class="co">##  $ wind       : int [1:4309] 30 40 50 45 40 30 30 30 35 45 ...</span></span>
<span><span class="co">##  $ pressure   : int [1:4309] 1004 1000 997 998 1000 1000 1001 1007 1004 999 ...</span></span></code></pre>
<p>When you create data to monitor drift, I recommend using a group
column that is formatted akin to ISO-8601 standards,
e.g. <code>YYYY-MM-DD</code>, and stacking the data sets in order of
date. This will ensure your output is easy to read.</p>
</div>
<div class="section level2">
<h2 id="distribution-drift">Distribution drift<a class="anchor" aria-label="anchor" href="#distribution-drift"></a>
</h2>
<div class="section level3">
<h3 id="numeric-distributions">Numeric distributions<a class="anchor" aria-label="anchor" href="#numeric-distributions"></a>
</h3>
<p>I recommend using <code>flyover_binline_ridges</code> or
<code>flyover_density_ridges</code> to monitor drift of numeric
variables over time.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ridges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_density_ridges</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">ridges</span>,</span>
<span>              display_name <span class="op">=</span> <span class="st">"ridges"</span>,</span>
<span>              output_dir   <span class="op">=</span> <span class="st">"display-storm-ridges"</span><span class="op">)</span></span></code></pre></div>
<iframe src="display-storm-ridges/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
<div class="section level3">
<h3 id="categorical-distributions">Categorical distributions<a class="anchor" aria-label="anchor" href="#categorical-distributions"></a>
</h3>
<p>I recommend using <code>flyover_bar_fill</code> to monitor drift of
categorical vairables over time. This will work best if the number of
categories is small.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bar_fill</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_bar_fill</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">bar_fill</span>,</span>
<span>              display_name <span class="op">=</span> <span class="st">"bar fill"</span>,</span>
<span>              output_dir   <span class="op">=</span> <span class="st">"display-storm-bar-fill"</span><span class="op">)</span></span></code></pre></div>
<iframe src="display-storm-bar-fill/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
</div>
<div class="section level2">
<h2 id="data-quality">Data quality<a class="anchor" aria-label="anchor" href="#data-quality"></a>
</h2>
<p>You can also monitor missing values, either as raw counts or as a
percent of total observations for the group.</p>
<div class="section level3">
<h3 id="missing-value-counts">Missing value counts<a class="anchor" aria-label="anchor" href="#missing-value-counts"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">na_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_na_count</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">na_count</span>,</span>
<span>              display_name <span class="op">=</span> <span class="st">"NA count"</span>,</span>
<span>              output_dir   <span class="op">=</span> <span class="st">"display-storm-na-count"</span><span class="op">)</span></span></code></pre></div>
<iframe src="display-storm-na-count/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
<div class="section level3">
<h3 id="missing-value-percentages">Missing value percentages<a class="anchor" aria-label="anchor" href="#missing-value-percentages"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">na_percent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_plots.html">build_plots</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="va">flyover_na_percent</span>, group_var <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/build_display.html">build_display</a></span><span class="op">(</span><span class="va">na_percent</span>,</span>
<span>              display_name <span class="op">=</span> <span class="st">"NA percent"</span>,</span>
<span>              output_dir   <span class="op">=</span> <span class="st">"display-storm-na-percent"</span><span class="op">)</span></span></code></pre></div>
<iframe src="display-storm-na-percent/" height="500" width="850" scrolling="no" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true">
</iframe>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Adam Austin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
