<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Optional data preparation • flyover</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Optional data preparation">
<meta property="og:description" content="flyover">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flyover</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-preparing-data.html">Optional data preparation</a>
    </li>
    <li>
      <a href="../articles/02-building-plots.html">Creating plots</a>
    </li>
    <li>
      <a href="../articles/03-building-displays.html">Creating displays</a>
    </li>
    <li>
      <a href="../articles/04-custom-plots.html">Using custom plots</a>
    </li>
    <li>
      <a href="../articles/05-gallery.html">Gallery</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ataustin/flyover/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Optional data preparation</h1>
            
            <h4 class="date">2020-11-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ataustin/flyover/blob/master/vignettes/01-preparing-data.Rmd"><code>vignettes/01-preparing-data.Rmd</code></a></small>
      <div class="hidden name"><code>01-preparing-data.Rmd</code></div>

    </div>

    
    
<div id="what-this-article-covers" class="section level2">
<h2 class="hasAnchor">
<a href="#what-this-article-covers" class="anchor"></a>What this article covers</h2>
<p>A typical <code>flyover</code> workflow has the following steps:</p>
<ol style="list-style-type: decimal">
<li>Combine different data sets into a single table.</li>
<li>Apply a plotting function to the columns of the table.</li>
<li>Build a display to navigate the plots.</li>
</ol>
<p>This vignette will introduce <strong>step 1</strong>: how <code>flyover</code>’s helper functions can be used to prepare multiple data sets for comparison.</p>
<p>This package generally relies on the conscientiousness of the user to clean up data sets prior to plotting, but the helper functions are provided for convenience as part of the <code>flyover</code> workflow.</p>
</div>
<div id="starting-from-separate-data-sets" class="section level2">
<h2 class="hasAnchor">
<a href="#starting-from-separate-data-sets" class="anchor"></a>Starting from separate data sets</h2>
<p>If your goal is to compare distributions of variables across multiple data sets, you must first collect those data sets into a single table prior to plotting. <code>flyover</code> provides basic functions to accomplish this.</p>
<p>Let’s say we have two data sets we would like to compare, one from an old data process and one from a new one. They consist of numeric and categorical data, and they don’t share all the same columns.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="va">old</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>num1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,
                  num2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html">rexp</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,
                  cat1 <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,
                  cat2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"z"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>

<span class="va">new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>num1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,
                  num2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html">rexp</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,
                  cat1 <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></pre></div>
<p>The first step is to create a named list of the data. The names will be used as the levels of a grouping variable to identify observations in later plots, so be sure to make them meaningful.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/enlist_data.html">enlist_data</a></span><span class="op">(</span><span class="va">old</span>, <span class="va">new</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"old data"</span>, <span class="st">"new data"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span></pre></div>
<pre><code>## List of 2
##  $ old data: tibble [5 × 4] (S3: tbl_df/tbl/data.frame)
##   ..$ num1: num [1:5] 0.586 0.709 -0.109 -0.453 0.606
##   ..$ num2: num [1:5] 2.878 1.605 0.471 6.402 1.258
##   ..$ cat1: chr [1:5] "a" "b" "c" "d" ...
##   ..$ cat2: chr [1:5] "z" "z" "z" "z" ...
##  $ new data: tibble [5 × 3] (S3: tbl_df/tbl/data.frame)
##   ..$ num1: num [1:5] -0.0942 -0.2469 1.6612 -0.4489 0.546
##   ..$ num2: num [1:5] 1.2525 0.3971 0.0881 1.7222 5.3849
##   ..$ cat1: chr [1:5] "a" "b" "c" "d" ...</code></pre>
</div>
<div id="creating-a-single-table-from-a-named-list" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-single-table-from-a-named-list" class="anchor"></a>Creating a single table from a named list</h2>
<p>All that is left is to stack the data in the list together to create one table. In the process, a grouping variable is created, whose name defaults to <code>flyover_id_</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">data_stack</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stack_data.html">stack_data</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span>

<span class="va">data_stack</span></pre></div>
<pre><code>## # A tibble: 10 x 5
##    flyover_id_    num1   num2 cat1  cat2 
##    &lt;chr&gt;         &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
##  1 old data     0.586  2.88   a     z    
##  2 old data     0.709  1.61   b     z    
##  3 old data    -0.109  0.471  c     z    
##  4 old data    -0.453  6.40   d     z    
##  5 old data     0.606  1.26   e     z    
##  6 new data    -0.0942 1.25   a     &lt;NA&gt; 
##  7 new data    -0.247  0.397  b     &lt;NA&gt; 
##  8 new data     1.66   0.0881 c     &lt;NA&gt; 
##  9 new data    -0.449  1.72   d     &lt;NA&gt; 
## 10 new data     0.546  5.38   e     &lt;NA&gt;</code></pre>
<p>Notice that the variable <code>cat2</code> appears in the old data set but not the new one, so the values for this variable are <code>NA</code> in the records corresponding to the new data. Plotting this field may not be useful to you, since the plot would give you no information about how the distribution changed, and you may already be aware of the column’s absense in newer data. You can remove columns that don’t appear in every data set (and you can also change the grouping variable name):</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">data_stack_drop</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stack_data.html">stack_data</a></span><span class="op">(</span><span class="va">data_list</span>, drop_mismatches <span class="op">=</span> <span class="cn">TRUE</span>, group_var <span class="op">=</span> <span class="st">"grp"</span><span class="op">)</span>

<span class="va">data_stack_drop</span></pre></div>
<pre><code>## # A tibble: 10 x 4
##    grp         num1   num2 cat1 
##    &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
##  1 old data  0.586  2.88   a    
##  2 old data  0.709  1.61   b    
##  3 old data -0.109  0.471  c    
##  4 old data -0.453  6.40   d    
##  5 old data  0.606  1.26   e    
##  6 new data -0.0942 1.25   a    
##  7 new data -0.247  0.397  b    
##  8 new data  1.66   0.0881 c    
##  9 new data -0.449  1.72   d    
## 10 new data  0.546  5.38   e</code></pre>
</div>
<div id="using-a-pipe" class="section level2">
<h2 class="hasAnchor">
<a href="#using-a-pipe" class="anchor"></a>Using a pipe</h2>
<p>Notice that these functions – indeed, all the functions in this package – are data-first, meaning they are pipe-friendly. Thus you could in theory write your code like so:</p>
<pre><code>data_stack &lt;-
  old %&gt;%
  enlist_data(new, names = c("old", "new")) %&gt;%
  stack_data()</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam Austin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
